{% extends 'blogs/base.html' %}
{% load bootstrap4 %}

{% block page_header %}
<div class="row">
  <div class="col text-center">
    <h2>{{blog_post.title}}</h2>
  </div>
</div>
<div class="d-flex justify-content-center">
  <h5>On {{blog_post.date_added}}</h5>
</div>
{% endblock page_header %}

{% block content %}
<div class="row">
  <div id="dictionarySection" class="col-3">
    <!-- Dictioncary Section-->
    Mini Dictionary
    <form class="mt-1" method="post" 
      action="{% url 'dictionaries:dictionary' post_pk %}">
      {% csrf_token %}
      {% bootstrap_form dict_form %}
      <button class="btn btn-primary btn-block" 
        type="submit" name="dictionary" value="add">Save</button>
    </form>
        <!-- Dictionaries section-->
    <ul id="dictionaryList">
      {% for dictionary in dictionaries %}
      <li class="nav-item"><a href="#id-{{dictionary.id}}"  data-toggle="collapse" role="button" aria-expanded="false" aria-controls="id-{{dictionary.id}}">{{dictionary}}</a>
      </li>
      <li class="dictionaryItem collapse" id="id-{{dictionary.id}}">
          <!-- Delete dictionary form-->
        <form class="mt-2" 
          action="{% url 'dictionaries:delete' blog_post.id dictionary.id %}" method="POST">
          {% csrf_token %}
          {{dictionary.word_translation}}
        <button class="iconButton" type="submit" name="dictionary" value="delete"><span class="oi oi-trash"></span></button>
        </form>
      </li>
      {% empty %}
      <p>No words were added</p>
      {% endfor %}
    </ul>
  </div>

    <!-- Blog Post Section-->
    <div id="postSection" class="col">
      {{blog_post.text | safe}}
    </div>
    <!-- End of Blog Post section-->

    <!-- Translation section-->
  <!--Input section-->
  <div class="col-3" id="translationSection">
    Google translate
    <form method="POST" action="{% url 'blogs:blog_post' post_pk %}">
      <div class="form-row mt-1">
        <div class="col">
          {% csrf_token %}
          {{trans_form.source_language}}
        </div>
        <div class="col">
          {{trans_form.target_language}}
        </div>
      </div>
      <div class="form-row">
        <div class="col">
          {{trans_form.input_langauge}}
        </div>
      </div>
      <div class="form-row">
        <div class="col">
          <button class="btn btn-primary btn-md btn-block" 
            type="submit" name="Translate" value="submit">Translate</button>
        </div>
      </div>
    </form>

        <!--output section-->
        <div class="container border border-secondary rounded-lg mt-2 pt-0 pl-1 pr-2 pb-5 position-sticky">
          <div class="row pb-5">
            <div class="col pb-5">
              {{translation}}
            </div>
          </div>
        </div>
        <!--End of output section-->
        <!--End of translation section-->
  </div>
</div>
{% endblock content %}