{% extends 'blogs/base.html' %}
{% load bootstrap4 %}

{% block page_header %}
{% endblock page_header %}

{% block content %}
<div class="container">
    <div class="row">

      <!-- Dictioncary Section-->
      <div class="col-3">
        <!-- Displaying a from for entering new words-->
        Mini Dictionary
        <form method="post" action="{% url 'blogs:blog_post' post_pk %}">
          {% csrf_token %}
          {% bootstrap_form form %}
          <button class="btn btn-primary btn-md" 
            type="submit" name="addWord" value="addWord">Save word</button>
        </form>

        <!-- Showing previously saved words-->
        <ul>
          {% for dictionary in dictionaries %}
          <li class="nav-item"><a href="#{{dictionary}}" data-toggle="collapse" role="button" aria-expanded="false" aria-controls="{{dictionary}}">{{dictionary}}</a>
            </li>
            <!-- Form for deleting a spesifc dictionary-->
          <div>
            <ul>
              <li class="collapse" id="{{dictionary}}">{{dictionary.word_translation}}
                <form action="{% url 'dictionaries:del_dictionary' blog_post.id dictionary.id %}" method="POST">
                  {% csrf_token %}
                <button class="btn btn-danger btn-sm" 
                type="submit" name="del" value="post">Delete word</button>      
              </form>
              </li>
            </ul>
          </div>
          {% empty %}
          <p>No words were added</p>
          {% endfor %}
        </ul>
      </div>

      <!-- Blog Post Section-->
      <div class="col-6">
        <h2>{{blog_post.title}}</h2>
        {{blog_post.text | safe}}
      </div>

      <!-- Translation section-->
      <div class="col-3">
        Google translate
        <form method="post" action="{% url 'blogs:blog_post' post_pk %}">
          <div class="form-row">
            <div class="col">
          {% csrf_token %}
          {{ trans_form.source_language}} 
            </div>
            <div class="col">
              {{trans_form.target_language}}
            </div>
          </div>
          {{trans_form.input_langauge}}
          {{trans_form.result}}
          <button class="btn btn-primary btn-md" 
            type="submit" name="addWord" value="addWord">Translate</button>

        </form>
        <p>{{itext}}</p>
        <p>{{ttext}}</p>
        <p>{{translation}}</p>
      </div>
    </div>
  </div>
{% endblock content %}